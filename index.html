<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Betting Value Calculator</title>
  <meta name="theme-color" content="#0d6efd" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="/manifest.json" />
</head>
<body>
  <h1>Betting Value Strategy</h1>
  <label>Probability (%): <input id="prob" type="number" /></label><br />
  <label>Odds: <input id="odds" type="number" step="0.01" /></label><br />
  <button onclick="calcValue()">Check Value</button>
  <p id="result"></p>

  <script>
    function calcValue() {
      const prob = parseFloat(document.getElementById("prob").value);
      const odds = parseFloat(document.getElementById("odds").value);
      const value = (prob / 100) * odds;
      document.getElementById("result").textContent =
        value > 1
          ? `✅ Value Bet! (Expected Value: ${value.toFixed(2)})`
          : `❌ No Value (Expected Value: ${value.toFixed(2)})`;
    }
  </script>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js')
        .then(() => console.log('✅ Service Worker registered'))
        .catch(err => console.error('❌ Service Worker registration failed', err));
    }

    async function getLiveOdds() {
      const res = await fetch(
        'https://api.the-odds-api.com/v4/sports/soccer_epl/odds?regions=eu&markets=h2h&apiKey=6a2867eb1227c801fb9f87125811b143'
      );

      if (!res.ok) {
        document.getElementById("result").textContent = "❌ Error fetching odds";
        return;
      }

      const data = await res.json();
      const first = data[0];
      const teams = first.teams.join(" vs ");
      const odds = first.bookmakers[0].markets[0].outcomes;

      let txt = `${teams}\n`;
      odds.forEach(o => txt += `${o.name}: ${o.price}\n`);
      document.getElementById("result").textContent = txt;
    }

    getLiveOdds();
  </script>
</body>
</html>
